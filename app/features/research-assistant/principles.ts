/**
 * Research Assistant 모듈 - 원칙 (Principles)
 *
 * @sync contexts/research-assistant-principles.md
 *
 * 이 파일은 Research Assistant의 비즈니스 규칙과 설정을 정의합니다.
 * 문서와 동기화를 유지해야 합니다.
 */

// =============================================================================
// 1. AI 설정
// =============================================================================

/** 채팅 모델 */
export const CHAT_MODEL = 'gpt-4o-mini';

/** 권장 응답 길이 (문자) */
export const RECOMMENDED_RESPONSE_LENGTH = 500;

// =============================================================================
// 2. 프롬프트 제한
// =============================================================================

/** 초록 최대 길이 (프롬프트용) */
export const ABSTRACT_MAX_LENGTH = 300;

// =============================================================================
// 3. 역할 정의
// =============================================================================

/**
 * Research Assistant 역할 목록
 */
export const ASSISTANT_ROLES = [
  '논문 분석 및 비교',
  'Research Gap 식별',
  '후속 연구 아이디어 제안',
  '연구 계획서/제안서 작성 지원',
  '방법론 제안',
  '리스크 및 한계점 분석',
] as const;

// =============================================================================
// 4. 시스템 프롬프트 템플릿
// =============================================================================

/**
 * 기본 시스템 프롬프트
 */
export const BASE_SYSTEM_PROMPT = `당신은 학술 연구를 돕는 전문 AI 조력자입니다.
연구자가 선택한 논문들을 바탕으로 후속 연구 아이디어를 발전시키고 구체화하도록 도와주세요.

## 역할
${ASSISTANT_ROLES.map((role) => `- ${role}`).join('\n')}`;

/**
 * 응답 가이드라인
 */
export const RESPONSE_GUIDELINES = `
## 응답 가이드라인
- 한국어로 응답하세요
- 구체적이고 실행 가능한 제안을 하세요
- 마크다운 형식을 사용하여 가독성을 높이세요
- 필요시 논문 인용을 명확히 하세요
- 모든 응답은 가능하면 ${RECOMMENDED_RESPONSE_LENGTH}글자 이하로 하세요.
- 필요하면 질문하여 요청을 구체화하세요`;

// =============================================================================
// 5. 초기 메시지 템플릿
// =============================================================================

/**
 * 논문 있을 때 초기 메시지
 */
export const INITIAL_MESSAGE_WITH_PAPERS = `**선택된 논문:** {count}개
{paperList}

무엇을 도와드릴까요? 예시:
- "후속 연구 아이디어를 제안해줘"
- "Research Gap을 찾아줘"
- "연구 계획서 초안을 작성해줘"

💡 상단의 "분석" 버튼을 클릭하면 통합 컨텍스트 분석을 수행합니다.`;

/**
 * 논문 없을 때 초기 메시지
 */
export const INITIAL_MESSAGE_WITHOUT_PAPERS = `안녕하세요! 연구 아이디어에 대해 자유롭게 대화해보세요.

예시:
- "이런 연구 주제에 관심이 있어"
- "연구 방향을 잡는데 도움이 필요해"
- "이 분야의 트렌드가 궁금해"

💡 논문을 검색하고 선택하면 더 구체적인 분석이 가능합니다.`;

// =============================================================================
// 6. SSE 설정
// =============================================================================

/**
 * SSE 응답 헤더
 */
export const SSE_HEADERS = {
  'Content-Type': 'text/event-stream',
  'Cache-Control': 'no-cache',
  Connection: 'keep-alive',
} as const;

// =============================================================================
// 7. 에러 메시지
// =============================================================================

export const ERROR_MESSAGES = {
  CHAT_FAILED: 'Failed to process chat',
  RESPONSE_FAILED: '죄송합니다. 응답을 생성하는 데 실패했습니다.',
  NETWORK_ERROR: '죄송합니다. 오류가 발생했습니다.',
} as const;

// =============================================================================
// 8. API 경로
// =============================================================================

/** 채팅 API 경로 */
export const CHAT_API_PATH = '/api/chat';
