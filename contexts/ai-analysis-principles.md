# AI Analysis 모듈 - 원칙

> 동기화 대상: `app/features/ai-analysis/principles.ts`

---

## 1. AI 모델 설정

### 1.1 사용 모델

| 용도 | 모델 |
|------|------|
| 요약/번역/분석 | `gpt-4o-mini` |
| 임베딩 | `text-embedding-3-small` |

### 1.2 온도 설정

| 작업 | Temperature | 이유 |
|------|-------------|------|
| 요약 | 기본값 | 정확성 중시 |
| 번역 | 기본값 | 정확성 중시 |
| 관심 요약 | 0.3 | 일관성 중시 |
| 컨텍스트 분석 | 기본값 | 창의성 허용 |

---

## 2. 논문 요약 규칙

### 2.1 출력 구조

| 필드 | 설명 | 길이 |
|------|------|------|
| `overview` | 논문 전체 개요 | 1-2문장 |
| `goals` | 연구 목표 및 목적 | 1-2문장 |
| `method` | 사용된 연구 방법론 | 1-2문장 |
| `results` | 주요 연구 결과 및 기여 | 1-2문장 |
| `keywords` | 핵심 키워드 (영어) | 3-5개 |

### 2.2 배치 처리

- **배치 크기**: 3개씩 순차 처리
- **동시 요청 제한**: API 부하 방지

---

## 3. 번역 규칙

### 3.1 번역 대상

- 영어 → 한국어
- 대상: 논문 초록 (abstract)

### 3.2 번역 원칙

- 자연스럽고 정확한 한국어
- 전문 용어는 적절히 번역
- 필요시 괄호 안에 원어 병기
  - 예: "대규모 언어 모델(Large Language Model)"

---

## 4. 관심 주제 요약 규칙

### 4.1 트리거 조건

- 논문 선택 시 자동 실행
- 디바운스: 500ms

### 4.2 출력 규칙

| 항목 | 규칙 |
|------|------|
| 최대 길이 | 100자 이하 |
| 문체 | 명사형 종결 |
| 관점 | 기술/방법론/도메인 |

### 4.3 예시

- "Vision Transformer를 활용한 이미지 분류"
- "Transformer 기반 대규모 언어 모델과 사전학습 기법"

---

## 5. 컨텍스트 분석 규칙

### 5.1 활성화 조건

- **최소 논문 수**: 2개 이상 선택
- **실행 방식**: "분석" 버튼으로 수동 실행

### 5.2 출력 구조

| 필드 | 설명 | 개수 |
|------|------|------|
| `commonProblem` | 공통 핵심 문제 | 1-2문장 |
| `commonMethods` | 공통 방법론 | 2-4개 |
| `differences` | 주요 차이점/다른 접근법 | 2-4개 |
| `researchLandscape` | 연구 지형 요약 | 2-3문장 |

---

## 6. 에러 처리 원칙

### 6.1 API 에러 시

| 상황 | 대응 |
|------|------|
| 요약 실패 | 500 에러 반환, PostHog 기록 |
| 번역 실패 | 500 에러 반환 |
| 관심 요약 실패 | 빈 문자열 반환 (graceful) |
| 컨텍스트 분석 실패 | 500 에러 반환 |

### 6.2 입력 검증

| 엔드포인트 | 필수 입력 |
|------------|----------|
| `/api/summarize` | title, abstract |
| `/api/translate` | text |
| `/api/interest-summary` | selectedTitles (배열) |
| `/api/context-summary` | papers (2개 이상) |

---

## 7. 언어 규칙

| 항목 | 언어 |
|------|------|
| 요약 결과 | 한국어 |
| 키워드 | 영어 |
| 번역 결과 | 한국어 |
| 관심 요약 | 한국어 |
| 컨텍스트 분석 | 한국어 |

---

## 핵심 원칙 요약

1. **일관된 모델**: gpt-4o-mini 사용
2. **구조화된 출력**: Zod 스키마로 검증
3. **한국어 우선**: 결과물은 한국어 (키워드 제외)
4. **Graceful 에러 처리**: 관심 요약은 빈 값 허용
5. **배치 처리**: 요약은 3개씩 순차 처리

---

> **동기화 지침**: 이 문서를 수정하면 `app/features/ai-analysis/principles.ts`도 함께 수정해야 합니다.
